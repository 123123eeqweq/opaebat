# üìÅ –°–¢–†–£–ö–¢–£–†–ê –§–†–û–ù–¢–ï–ù–î–ê ‚Äî –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–æ–±—â–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [App Router (Next.js 14)](#app-router-nextjs-14)
4. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
5. [–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã](#–±–∏–±–ª–∏–æ—Ç–µ–∫–∏-–∏-—É—Ç–∏–ª–∏—Ç—ã)
6. [–¢–∏–ø—ã](#—Ç–∏–ø—ã)
7. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
8. [–ü—É–±–ª–∏—á–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã](#–ø—É–±–ª–∏—á–Ω—ã–µ-—Ä–µ—Å—É—Ä—Å—ã)
9. [–ö–ª—é—á–µ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö](#–∫–ª—é—á–µ–≤—ã–µ-–ø–æ—Ç–æ–∫–∏-–¥–∞–Ω–Ω—ã—Ö)

---

## üéØ –û–ë–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ **Next.js 14** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **App Router** –∏ **React 18**.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

- **App Router**: –§–∞–π–ª–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–∞–ø–∫—É `app/`
- **Server/Client Components**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **TypeScript**: –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Tailwind CSS**: –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **API Integration**: Cookie-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **WebSocket**: –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Ü–µ–Ω –∏ —Å–≤–µ—á–µ–π

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:

- **Framework**: Next.js 14.2.5
- **React**: 18.3.1
- **TypeScript**: 5.5.4
- **Styling**: Tailwind CSS 3.4.7
- **Icons**: Lucide React
- **Charts**: Recharts (–¥–ª—è –¥—Ä—É–≥–∏—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤, –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫)
- **State Management**: React Hooks (useState, useEffect, useRef)

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
frontend/
‚îú‚îÄ‚îÄ app/                              # üéØ App Router (Next.js 14)
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                    # –ö–æ—Ä–Ω–µ–≤–æ–π layout (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —à—Ä–∏—Ñ—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                      # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (/)
‚îÇ   ‚îú‚îÄ‚îÄ globals.css                   # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ not-found.tsx                 # 404 —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ login/                        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ register/                     # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ terminal/                     # üéØ –¢–ï–†–ú–ò–ù–ê–õ (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                  # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —Å –≥—Ä–∞—Ñ–∏–∫–æ–º
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ trade/                        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ wallet/                       # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—à–µ–ª—å–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ profile/                      # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ about/                        # –û –∫–æ–º–ø–∞–Ω–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ education/                    # –û–±—É—á–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ reviews/                      # –û—Ç–∑—ã–≤—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ assets/                       # –ê–∫—Ç–∏–≤—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ start/                        # –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ policy/                       # –ü–æ–ª–∏—Ç–∏–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ terms/                    # –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ       ‚îú‚îÄ‚îÄ privacy/                  # –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ       ‚îú‚îÄ‚îÄ risks/                    # –†–∏—Å–∫–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ       ‚îî‚îÄ‚îÄ aml-kyc/                  # AML/KYC
‚îÇ           ‚îî‚îÄ‚îÄ page.tsx
‚îÇ
‚îú‚îÄ‚îÄ components/                       # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthGuard.tsx             # Guard –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ ui/                           # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø—É—Å—Ç–æ, –¥–ª—è –±—É–¥—É—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Footer.tsx                    # –§—É—Ç–µ—Ä —Å–∞–π—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ lib/                              # üéØ –ë–ò–ë–õ–ò–û–¢–ï–ö–ò –ò –£–¢–ò–õ–ò–¢–´
‚îÇ   ‚îú‚îÄ‚îÄ api/                          # API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts                    # –ü—Ä–æ—Å—Ç–æ–π API –∫–ª–∏–µ–Ω—Ç (fetch wrapper)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ client.ts                 # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç (authApi)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                        # React Hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts                # Hook –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useTerminalSnapshot.ts    # Hook –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–Ω–∞–ø—à–æ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useWebSocket.ts           # Hook –¥–ª—è WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ instruments.ts                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–≤–∞–ª—é—Ç–Ω—ã–µ –ø–∞—Ä—ã)
‚îÇ   ‚îú‚îÄ‚îÄ terminalLayout.ts             # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ layout —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (localStorage)
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts                      # –£—Ç–∏–ª–∏—Ç—ã (cn –¥–ª—è className merge)
‚îÇ
‚îú‚îÄ‚îÄ types/                            # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ terminal.ts                   # –¢–∏–ø—ã –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (TerminalSnapshot)
‚îÇ
‚îú‚îÄ‚îÄ public/                           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ images/                       # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ logo.png                  # –õ–æ–≥–æ—Ç–∏–ø
‚îÇ       ‚îú‚îÄ‚îÄ flags/                     # –§–ª–∞–≥–∏ —Å—Ç—Ä–∞–Ω (en, ru, ua)
‚îÇ       ‚îî‚îÄ‚îÄ ...                       # –î—Ä—É–≥–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ .env.local.example                # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore                        # Git ignore
‚îú‚îÄ‚îÄ components.json                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è shadcn/ui (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ next.config.js                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js
‚îú‚îÄ‚îÄ package.json                      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ postcss.config.js                 # PostCSS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ tailwind.config.ts                # Tailwind CSS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ tsconfig.json                     # TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md                         # README –ø—Ä–æ–µ–∫—Ç–∞
```

---

## üéØ APP ROUTER (Next.js 14)

### `app/layout.tsx` ‚Äî –ö–æ—Ä–Ω–µ–≤–æ–π Layout

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (title, favicon)
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç —à—Ä–∏—Ñ—Ç Montserrat (–ª–∞—Ç–∏–Ω–∏—Ü–∞ + –∫–∏—Ä–∏–ª–ª–∏—Ü–∞)
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ (`globals.css`)
- –†–µ–Ω–¥–µ—Ä–∏—Ç `{children}`

**–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:**

- Title: `'COMFORTRADE'`
- Favicon: `/images/logo.png`
- Description: `'COMFORTRADE - —Ç–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä—ã–Ω–∫–∞—Ö'`

---

### `app/page.tsx` ‚Äî –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)

**–ú–∞—Ä—à—Ä—É—Ç:** `/`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–µ–Ω–¥–∏–Ω–≥/–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞.

---

### `app/terminal/page.tsx` ‚Äî –¢–µ—Ä–º–∏–Ω–∞–ª (–ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê)

**–ú–∞—Ä—à—Ä—É—Ç:** `/terminal`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å –≥—Ä–∞—Ñ–∏–∫–æ–º.

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏:**
   - –í—ã–±–æ—Ä –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä—ã (`instrument`)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (EURUSD, BTCUSD, ETHUSD –∏ —Ç.–¥.)

2. **–¢–∞–π–º—Ñ—Ä–µ–π–º:**
   - –¢–æ–ª—å–∫–æ `5s` (–±–∞–∑–æ–≤—ã–π —Ç–∞–π–º—Ñ—Ä–µ–π–º)

3. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - `useTerminalSnapshot()` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Å–Ω–∞–ø—à–æ—Ç–∞ (—Å–≤–µ—á–∏, —Ü–µ–Ω–∞, –∞–∫–∫–∞—É–Ω—Ç—ã)
   - `useWebSocket()` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

4. **–¢–æ—Ä–≥–æ–≤–ª—è:**
   - –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–¥–µ–ª–æ–∫ (CALL/PUT)
   - –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫
   - –ë–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞

5. **UI:**
   - –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é
   - –ì—Ä–∞—Ñ–∏–∫ (–≤—Ä–µ–º–µ–Ω–Ω–æ —É–¥–∞–ª–µ–Ω, –±—É–¥–µ—Ç –Ω–æ–≤—ã–π)
   - –ü–∞–Ω–µ–ª—å —Ç–æ—Ä–≥–æ–≤–ª–∏
   - –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–ø—Ä–æ—Ñ–∏–ª—å, –∏—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫)

**–°–æ—Å—Ç–æ—è–Ω–∏—è:**

```typescript
- instrument: string              // –ê–∫—Ç–∏–≤–Ω–∞—è –≤–∞–ª—é—Ç–Ω–∞—è –ø–∞—Ä–∞
- timeframe: '5s'                 // –¢–∞–π–º—Ñ—Ä–µ–π–º (—Ç–æ–ª—å–∫–æ 5s)
- accountType: 'demo' | 'real'    // –¢–∏–ø –∞–∫–∫–∞—É–Ω—Ç–∞
- activeMenu: string              // –ê–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
- amount: string                  // –°—É–º–º–∞ –¥–ª—è —Å–¥–µ–ª–∫–∏
- time: string                    // –í—Ä–µ–º—è —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏
- showProfileModal: boolean       // –ú–æ–¥–∞–ª–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
- showTradesHistory: boolean     // –ú–æ–¥–∞–ª–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–¥–µ–ª–æ–∫
```

**Hooks:**

- `useAuth()` ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `useTerminalSnapshot(instrument, timeframe)` ‚Äî —Å–Ω–∞–ø—à–æ—Ç
- `useWebSocket({ activeInstrumentRef, onPriceUpdate, onCandleClose, onServerTime })` ‚Äî WebSocket

**–í–∞–∂–Ω–æ:** –ì—Ä–∞—Ñ–∏–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ —É–¥–∞–ª–µ–Ω. –ù–∞ –µ–≥–æ –º–µ—Å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç "—Ç—É—Ç –±—É–¥–µ—Ç –Ω–æ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫".

---

### `app/login/page.tsx` ‚Äî –í—Ö–æ–¥

**–ú–∞—Ä—à—Ä—É—Ç:** `/login`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É.

**–§—É–Ω–∫—Ü–∏–∏:**

- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ (email, password)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useAuth().login()`
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/terminal` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞

---

### `app/register/page.tsx` ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

**–ú–∞—Ä—à—Ä—É—Ç:** `/register`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–§—É–Ω–∫—Ü–∏–∏:**

- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (email, password)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useAuth().register()`
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/terminal` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

---

### `app/trade/page.tsx` ‚Äî –¢–æ—Ä–≥–æ–≤–ª—è

**–ú–∞—Ä—à—Ä—É—Ç:** `/trade`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª—É).

---

### `app/wallet/page.tsx` ‚Äî –ö–æ—à–µ–ª–µ–∫

**–ú–∞—Ä—à—Ä—É—Ç:** `/wallet`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–æ–º/–±–∞–ª–∞–Ω—Å–æ–º.

---

### `app/profile/page.tsx` ‚Äî –ü—Ä–æ—Ñ–∏–ª—å

**–ú–∞—Ä—à—Ä—É—Ç:** `/profile`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

### `app/about/` ‚Äî –û –∫–æ–º–ø–∞–Ω–∏–∏

**–ú–∞—Ä—à—Ä—É—Ç:** `/about`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- `layout.tsx` ‚Äî layout –¥–ª—è —Å–µ–∫—Ü–∏–∏
- `page.tsx` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–û –Ω–∞—Å"

---

### `app/education/` ‚Äî –û–±—É—á–µ–Ω–∏–µ

**–ú–∞—Ä—à—Ä—É—Ç:** `/education`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- `layout.tsx` ‚Äî layout –¥–ª—è —Å–µ–∫—Ü–∏–∏
- `page.tsx` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±—É—á–µ–Ω–∏—è

---

### `app/reviews/` ‚Äî –û—Ç–∑—ã–≤—ã

**–ú–∞—Ä—à—Ä—É—Ç:** `/reviews`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- `layout.tsx` ‚Äî layout –¥–ª—è —Å–µ–∫—Ü–∏–∏
- `page.tsx` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∑—ã–≤–æ–≤

---

### `app/assets/` ‚Äî –ê–∫—Ç–∏–≤—ã

**–ú–∞—Ä—à—Ä—É—Ç:** `/assets`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- `layout.tsx` ‚Äî layout –¥–ª—è —Å–µ–∫—Ü–∏–∏
- `page.tsx` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–∫—Ç–∏–≤–æ–≤

---

### `app/start/` ‚Äî –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

**–ú–∞—Ä—à—Ä—É—Ç:** `/start`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- `layout.tsx` ‚Äî layout –¥–ª—è —Å–µ–∫—Ü–∏–∏
- `page.tsx` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã

---

### `app/policy/` ‚Äî –ü–æ–ª–∏—Ç–∏–∫–∏

**–ú–∞—Ä—à—Ä—É—Ç—ã:**

- `/policy/terms` ‚Äî –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `/policy/privacy` ‚Äî –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- `/policy/risks` ‚Äî –†–∏—Å–∫–∏
- `/policy/aml-kyc` ‚Äî AML/KYC

---

### `app/not-found.tsx` ‚Äî 404

**–ú–∞—Ä—à—Ä—É—Ç:** –õ—é–±–æ–π –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–∞—Ä—à—Ä—É—Ç

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ 404 (Not Found).

---

### `app/globals.css` ‚Äî –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ CSS —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**

- Tailwind CSS –¥–∏—Ä–µ–∫—Ç–∏–≤—ã
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏

---

## üß© –ö–û–ú–ü–û–ù–ï–ù–¢–´

### `components/auth/AuthGuard.tsx` ‚Äî Guard –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç-–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤.

**–ü—Ä–æ–ø—Å—ã:**

```typescript
{
  children: React.ReactNode;
  requireAuth?: boolean;    // –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  requireGuest?: boolean;   // –¢—Ä–µ–±—É–µ—Ç—Å—è –≥–æ—Å—Ç—å (–Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω)
}
```

**–õ–æ–≥–∏–∫–∞:**

- –ï—Å–ª–∏ `requireAuth && !isAuthenticated` ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login`
- –ï—Å–ª–∏ `requireGuest && isAuthenticated` ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/terminal`
- –ï—Å–ª–∏ –Ω–∞ `/login` –∏–ª–∏ `/register` –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/terminal`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```tsx
<AuthGuard requireAuth>
  <TerminalPage />
</AuthGuard>
```

---

### `components/Footer.tsx` ‚Äî –§—É—Ç–µ—Ä

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§—É—Ç–µ—Ä —Å–∞–π—Ç–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö).

---

### `components/ui/` ‚Äî UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–°—Ç–∞—Ç—É—Å:** –ü—É—Å—Ç–∞—è –ø–∞–ø–∫–∞ (–∑–∞–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤).

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ shadcn/ui –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ.

---

## üìö –ë–ò–ë–õ–ò–û–¢–ï–ö–ò –ò –£–¢–ò–õ–ò–¢–´

### `lib/api/api.ts` ‚Äî –ü—Ä–æ—Å—Ç–æ–π API –∫–ª–∏–µ–Ω—Ç

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ `fetch` –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤.

**–§—É–Ω–∫—Ü–∏—è:**

```typescript
api<T>(url: string, options?: RequestInit): Promise<T>
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `credentials: 'include'` (cookies)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `Content-Type: application/json`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º JSON
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
const data = await api<TerminalSnapshot>('/api/terminal/snapshot?instrument=EURUSD');
```

---

### `lib/api/client.ts` ‚Äî –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π API –∫–ª–∏–µ–Ω—Ç —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–ö–ª–∞—Å—Å `ApiError`:**

```typescript
class ApiError extends Error {
  status: number;
  data: unknown;
}
```

**–§—É–Ω–∫—Ü–∏—è `apiRequest`:**

```typescript
apiRequest<T>(endpoint: string, options?: RequestOptions): Promise<T>
```

**`authApi` –æ–±—ä–µ–∫—Ç:**

```typescript
authApi = {
  register(email, password): Promise<{ user }>
  login(email, password): Promise<{ user }>
  logout(): Promise<{ message }>
  me(): Promise<{ user }>
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
const response = await authApi.login('user@example.com', 'password');
```

---

### `lib/hooks/useAuth.ts` ‚Äî Hook –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**

```typescript
{
  user: User | null;
  isLoading: boolean;
  isAuthenticated: boolean;
  login(email, password): Promise<{ success, error? }>
  register(email, password): Promise<{ success, error? }>
  logout(): Promise<void>
  checkAuth(): Promise<void>
}
```

**–õ–æ–≥–∏–∫–∞:**

- –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ `authApi.me()`
- –•—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `useState`
- –ú–µ—Ç–æ–¥—ã `login`, `register`, `logout` –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```tsx
const { user, isAuthenticated, login, logout } = useAuth();
```

---

### `lib/hooks/useTerminalSnapshot.ts` ‚Äî Hook —Å–Ω–∞–ø—à–æ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ —Å–Ω–∞–ø—à–æ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —Å –±–µ–∫–µ–Ω–¥–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

```typescript
useTerminalSnapshot(
  instrument: string = DEFAULT_INSTRUMENT_ID,
  timeframe: string = '5s'
)
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**

```typescript
{
  data: TerminalSnapshot | null;
  loading: boolean;
  error: string | null;
}
```

**–õ–æ–≥–∏–∫–∞:**

- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `instrument` –∏–ª–∏ `timeframe` –¥–µ–ª–∞–µ—Ç –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `api()` –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ `/api/terminal/snapshot`
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–º–µ–Ω—É –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```tsx
const { data, loading, error } = useTerminalSnapshot('EURUSD', '5s');
```

---

### `lib/hooks/useWebSocket.ts` ‚Äî Hook WebSocket

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

```typescript
useWebSocket({
  activeInstrumentRef?: React.MutableRefObject<string>;
  onPriceUpdate?: (price: number, timestamp: number) => void;
  onCandleClose?: (candle: any, timeframe: string) => void;
  onServerTime?: (timestamp: number) => void;
  enabled?: boolean;
})
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**

```typescript
{
  isConnected: boolean;
}
```

**–õ–æ–≥–∏–∫–∞:**

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
   - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `ws://localhost:3001/ws` (–∏–ª–∏ –∏–∑ `NEXT_PUBLIC_API_URL`)
   - –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ `enabled && isAuthenticated`

2. **–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:**
   - –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `activeInstrumentRef.current`
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è `activeInstrumentRef` —á–µ—Ä–µ–∑ polling (–∫–∞–∂–¥—ã–µ 500–º—Å)
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `{ type: 'subscribe', instrument: 'EURUSD' }`

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:**
   - `price:update` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `onPriceUpdate`
   - `candle:close` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `onCandleClose`
   - `server:time` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `onServerTime`
   - `trade:open`, `trade:close` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç alert (–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

4. **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
   - –ü—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è (–¥–æ 5 –ø–æ–ø—ã—Ç–æ–∫)
   - –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: 3 —Å–µ–∫—É–Ω–¥—ã

5. **Ping:**
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `ping` –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```tsx
const instrumentRef = useRef('EURUSD');

useWebSocket({
  activeInstrumentRef: instrumentRef,
  onPriceUpdate: (price, timestamp) => {
    // –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
  },
  onCandleClose: (candle, timeframe) => {
    // –î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫—Ä—ã—Ç—É—é —Å–≤–µ—á—É
  },
  onServerTime: (timestamp) => {
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è
  },
});
```

---

### `lib/instruments.ts` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–ª—é—Ç–Ω—ã—Ö –ø–∞—Ä –∏ –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.

**–¢–∏–ø—ã:**

```typescript
interface InstrumentInfo {
  id: string;        // 'EURUSD', 'BTCUSD', ...
  label: string;     // 'EUR/USD OTC'
  digits: number;    // –¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (5 –¥–ª—è forex, 2 –¥–ª—è crypto)
}
```

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**

- `DEFAULT_INSTRUMENT_ID = 'EURUSD'`
- `INSTRUMENTS: InstrumentInfo[]` ‚Äî –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**

- `getInstrument(id)` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ ID
- `getInstrumentOrDefault(id)` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**

- **Forex:** EURUSD, GBPUSD, USDCAD, USDCHF, AUDCAD, AUDCHF, CADJPY, EURJPY, GBPJPY, NZDUSD, NZDJPY, EURCHF, EURNZD, GBPAUD, CHFNOK, UAHUSD
- **Crypto:** BTCUSD, ETHUSD, SOLUSD, BNBUSD

---

### `lib/terminalLayout.ts` ‚Äî –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ layout —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ `localStorage`.

**–¢–∏–ø—ã:**

```typescript
type TerminalLayout = {
  instrument: string;
  timeframe: string;
  indicators: {
    id: string;
    params: Record<string, any>;
    visible: boolean;
  }[];
  drawings: {
    id: string;
    type: 'horizontal' | 'vertical' | 'trend' | ...;
    points: { time: number; price: number }[];
    color?: string;
    offset?: number;
  }[];
};
```

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**

- `TERMINAL_LAYOUT_KEY = 'terminal.layout.v1'`

**–§—É–Ω–∫—Ü–∏–∏:**

- `saveLayoutToLocalStorage(layout)` ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å layout
- `loadLayoutFromLocalStorage()` ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å layout
- `indicatorConfigToLayout(config)` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- `layoutIndicatorToConfig(layoutIndicator, indicatorType)` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- `drawingToLayout(drawing)` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å drawing (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- `layoutDrawingToDrawing(layoutDrawing)` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–°—Ç–∞—Ç—É—Å:** –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ drawings –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (–≥—Ä–∞—Ñ–∏–∫ —É–¥–∞–ª–µ–Ω).

---

### `lib/utils.ts` ‚Äî –£—Ç–∏–ª–∏—Ç—ã

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

**–§—É–Ω–∫—Ü–∏—è `cn`:**

```typescript
cn(...classes: (string | undefined | null | false)[]): string
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ className —Å—Ç—Ä–æ–∫ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `clsx` –∏ `tailwind-merge`).

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```tsx
<div className={cn('base-class', condition && 'conditional-class')} />
```

---

## üìù –¢–ò–ü–´

### `types/terminal.ts` ‚Äî –¢–∏–ø—ã —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** TypeScript —Ç–∏–ø—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

**–¢–∏–ø—ã:**

```typescript
interface TerminalSnapshot {
  instrument: string;              // 'EURUSD', 'BTCUSD', ...
  user: { id: string; email: string };
  accounts: {
    id: string;
    type: 'demo' | 'real';
    balance: string;
    currency: string;
    isActive: boolean;
  }[];
  activeAccount: {
    id: string;
    type: 'demo' | 'real';
    balance: string;
    currency: string;
  } | null;
  price: {
    asset: string;                  // 'EUR/USD', 'BTC/USD', ...
    value: number;
    timestamp: number;
  };
  candles: {
    timeframe: string;              // '5s'
    items: {
      open: number;
      high: number;
      low: number;
      close: number;
      startTime: number;            // timestamp –Ω–∞—á–∞–ª–∞
      endTime: number;              // timestamp –∫–æ–Ω—Ü–∞
    }[];
  };
  openTrades: {
    id: string;
    direction: 'CALL' | 'PUT';
    amount: string;
    entryPrice: string;
    expiresAt: number;               // timestamp
    payout: string;
  }[];
  serverTime: number;               // timestamp
}
```

**–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ:** –¢–∏–ø—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –±–µ–∫–µ–Ω–¥–æ–º (`domain/terminal/TerminalSnapshotTypes.ts`).

---

## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### `next.config.js` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–û–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç:**

- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Rewrites/Redirects

---

### `tailwind.config.ts` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Tailwind CSS

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Tailwind CSS.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**

- –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (`content`)
- –¢–µ–º–∞ (—Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã)
- –ü–ª–∞–≥–∏–Ω—ã (`tailwindcss-animate`)

---

### `tsconfig.json` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ TypeScript.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**

- `paths` –¥–ª—è –∞–ª–∏–∞—Å–æ–≤ (`@/` ‚Üí `./`)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –í–∫–ª—é—á–µ–Ω–Ω—ã–µ/–∏—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

---

### `package.json` ‚Äî –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

- `next`: 14.2.5
- `react`: 18.3.1
- `react-dom`: 18.3.1
- `typescript`: 5.5.4
- `tailwindcss`: 3.4.7
- `lucide-react`: 0.427.0 (–∏–∫–æ–Ω–∫–∏)
- `recharts`: 3.7.0 (–≥—Ä–∞—Ñ–∏–∫–∏, –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫)

**–°–∫—Ä–∏–ø—Ç—ã:**

- `dev` ‚Äî –∑–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
- `build` ‚Äî —Å–±–æ—Ä–∫–∞ production
- `start` ‚Äî –∑–∞–ø—É—Å–∫ production —Å–µ—Ä–≤–µ—Ä–∞
- `lint` ‚Äî –ª–∏–Ω—Ç–∏–Ω–≥

---

### `.env.local.example` ‚Äî –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

- `NEXT_PUBLIC_API_URL` ‚Äî URL –±–µ–∫–µ–Ω–¥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `http://localhost:3001`)

---

## üñºÔ∏è –ü–£–ë–õ–ò–ß–ù–´–ï –†–ï–°–£–†–°–´

### `public/images/` ‚Äî –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
public/images/
‚îú‚îÄ‚îÄ logo.png                    # –õ–æ–≥–æ—Ç–∏–ø (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ favicon)
‚îú‚îÄ‚îÄ flags/                      # –§–ª–∞–≥–∏ —Å—Ç—Ä–∞–Ω
‚îÇ   ‚îú‚îÄ‚îÄ en.svg
‚îÇ   ‚îú‚îÄ‚îÄ ru.svg
‚îÇ   ‚îî‚îÄ‚îÄ ua.svg
‚îî‚îÄ‚îÄ ...                         # –î—Ä—É–≥–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (hero, icons, etc.)
```

**–î–æ—Å—Ç—É–ø:** –§–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø—É—Ç–∏ `/images/...` (Next.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç `public/`).

---

## üîÑ –ö–õ–Æ–ß–ï–í–´–ï –ü–û–¢–û–ö–ò –î–ê–ù–ù–´–•

### –ü–æ—Ç–æ–∫ 1: –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /terminal
   ‚îî‚îÄ> TerminalPage –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è

2. useTerminalSnapshot('EURUSD', '5s')
   ‚îî‚îÄ> api('/api/terminal/snapshot?instrument=EURUSD&timeframe=5s')
       ‚îî‚îÄ> –ë–µ–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç TerminalSnapshot
           ‚îú‚îÄ> candles: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å–≤–µ—á–µ–π
           ‚îú‚îÄ> price: —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞
           ‚îú‚îÄ> accounts: –∞–∫–∫–∞—É–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
           ‚îî‚îÄ> openTrades: –æ—Ç–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏

3. –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ UI
```

---

### –ü–æ—Ç–æ–∫ 2: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```
1. TerminalPage –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
   ‚îî‚îÄ> useWebSocket({ activeInstrumentRef, ... })

2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket
   ‚îî‚îÄ> ws://localhost:3001/ws
       ‚îú‚îÄ> –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ cookies
       ‚îî‚îÄ> –ü–æ–¥–ø–∏—Å–∫–∞: { type: 'subscribe', instrument: 'EURUSD' }

3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
   ‚îú‚îÄ> price:update ‚Üí onPriceUpdate() ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã
   ‚îú‚îÄ> candle:update ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–≤–µ—á–∏
   ‚îú‚îÄ> candle:close ‚Üí onCandleClose() ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ–π —Å–≤–µ—á–∏
   ‚îî‚îÄ> server:time ‚Üí onServerTime() ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏

4. –ü—Ä–∏ —Å–º–µ–Ω–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
   ‚îî‚îÄ> activeInstrumentRef.current = 'BTCUSD'
       ‚îî‚îÄ> Polling –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–∫–∞–∂–¥—ã–µ 500–º—Å)
           ‚îî‚îÄ> –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ subscribe
```

---

### –ü–æ—Ç–æ–∫ 3: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ /login
   ‚îî‚îÄ> –í–≤–æ–¥–∏—Ç email/password
       ‚îî‚îÄ> useAuth().login(email, password)
           ‚îî‚îÄ> authApi.login()
               ‚îî‚îÄ> POST /api/auth/login
                   ‚îî‚îÄ> –ë–µ–∫–µ–Ω–¥ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç cookie
                       ‚îî‚îÄ> –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /terminal

2. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
   ‚îî‚îÄ> useAuth() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
       ‚îî‚îÄ> authApi.me()
           ‚îî‚îÄ> GET /api/auth/me
               ‚îî‚îÄ> –ï—Å–ª–∏ cookie –≤–∞–ª–∏–¥–Ω–∞ ‚Üí user —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
               ‚îî‚îÄ> –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí isAuthenticated = false
```

---

### –ü–æ—Ç–æ–∫ 4: –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–¥–µ–ª–∫–∏

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   ‚îú‚îÄ> –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: CALL –∏–ª–∏ PUT
   ‚îú‚îÄ> –°—É–º–º–∞: amount
   ‚îî‚îÄ> –í—Ä–µ–º—è —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏: time

2. –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–û—Ç–∫—Ä—ã—Ç—å —Å–¥–µ–ª–∫—É"
   ‚îî‚îÄ> api('/api/trades', { method: 'POST', body: {...} })
       ‚îî‚îÄ> –ë–µ–∫–µ–Ω–¥ —Å–æ–∑–¥–∞–µ—Ç —Å–¥–µ–ª–∫—É
           ‚îî‚îÄ> WebSocket —Å–æ–±—ã—Ç–∏–µ trade:open
               ‚îî‚îÄ> Alert –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞:
   ‚îî‚îÄ> –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–Ω–∞–ø—à–æ—Ç–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket
```

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–•

### TerminalSnapshot (–∏–∑ API)

```typescript
{
  instrument: 'EURUSD',
  user: { id: '...', email: '...' },
  accounts: [
    { id: '...', type: 'demo', balance: '10000.00', currency: 'USD', isActive: true }
  ],
  activeAccount: {
    id: '...',
    type: 'demo',
    balance: '10000.00',
    currency: 'USD'
  },
  price: {
    asset: 'EUR/USD',
    value: 1.08000,
    timestamp: 1234567890
  },
  candles: {
    timeframe: '5s',
    items: [
      {
        open: 1.08000,
        high: 1.08050,
        low: 1.07980,
        close: 1.08020,
        startTime: 1234567890000,
        endTime: 1234567895000
      },
      ...
    ]
  },
  openTrades: [
    {
      id: '...',
      direction: 'CALL',
      amount: '10.00',
      entryPrice: '1.08000',
      expiresAt: 1234568000,
      payout: '20.00'
    }
  ],
  serverTime: 1234567890
}
```

---

### WebSocket —Å–æ–±—ã—Ç–∏—è

**–û—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É:**

```typescript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã
{
  instrument: 'EURUSD',
  type: 'price:update',
  data: {
    asset: 'EUR/USD',
    price: 1.08000,
    timestamp: 1234567890
  }
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–≤–µ—á–∏
{
  instrument: 'EURUSD',
  type: 'candle:close',
  data: {
    timeframe: '5s',
    candle: {
      open: 1.08000,
      high: 1.08050,
      low: 1.07980,
      close: 1.08020,
      timestamp: 1234567890000,
      timeframe: '5s'
    }
  }
}

// –í—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä–∞
{
  type: 'server:time',
  data: { timestamp: 1234567890 }
}
```

**–û—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É:**

```typescript
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
{ type: 'subscribe', instrument: 'EURUSD' }

// Ping
{ type: 'ping' }
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ù–û–í–û–ì–û –ì–†–ê–§–ò–ö–ê

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞ –Ω—É–∂–Ω–æ:

- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≥—Ä–∞—Ñ–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `components/chart/ChartContainer.tsx`)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `useTerminalSnapshot` –¥–ª—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `useWebSocket` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—ã—Ç–∏—è:
  - [ ] `price:update` ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–Ω–∏–∏ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
  - [ ] `candle:update` ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–≤–µ—á–∏
  - [ ] `candle:close` ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ–π —Å–≤–µ—á–∏, –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏—Å—Ç–æ—Ä–∏–∏ (–ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ):
  - [ ] `api('/api/quotes/candles?instrument=...&to=...&limit=200')`
- [ ] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–º–µ–Ω—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
  - [ ] –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ä–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
  - [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
  - [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ WebSocket

---

## üìù –ó–ê–ú–ï–¢–ö–ò

1. **–ì—Ä–∞—Ñ–∏–∫ —É–¥–∞–ª–µ–Ω:** –û—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ —É–¥–∞–ª–µ–Ω. –ù–∞ –µ–≥–æ –º–µ—Å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "—Ç—É—Ç –±—É–¥–µ—Ç –Ω–æ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫".

2. **–¢–æ–ª—å–∫–æ 5s —Ç–∞–π–º—Ñ—Ä–µ–π–º:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π —Ç–∞–π–º—Ñ—Ä–µ–π–º 5 —Å–µ–∫—É–Ω–¥.

3. **WebSocket –ø–æ–¥–ø–∏—Å–∫–∞:** –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –°–æ–±—ã—Ç–∏—è —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –Ω–∞ –±–µ–∫–µ–Ω–¥–µ, –Ω–æ –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

4. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** Cookie-based. Cookies –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `credentials: 'include'`.

5. **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ React Hooks (useState, useEffect, useRef). –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ state management (Redux, Zustand –∏ —Ç.–¥.).

6. **–¢–∏–ø—ã:** –¢–∏–ø—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –±–µ–∫–µ–Ω–¥–æ–º —á–µ—Ä–µ–∑ `types/terminal.ts`.

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞:** 2026-01-29  
**–í–µ—Ä—Å–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:** Next.js 14, React 18  
**–°—Ç–∞—Ç—É—Å –≥—Ä–∞—Ñ–∏–∫–∞:** –£–¥–∞–ª–µ–Ω, –±—É–¥–µ—Ç –Ω–æ–≤—ã–π
