# üè∑Ô∏è NAMING_CONVENTIONS.md ‚Äî –ö–æ–Ω–≤–µ–Ω—Ü–∏–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

> **‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** 
> - **`instrumentId`** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏** (–∞–≥—Ä–µ–≥–∞—Ü–∏—è, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
> - **`symbol`** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–¢–û–õ–¨–ö–û** –¥–ª—è UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
> - OTC –∏ REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–¥–µ–ª–µ–Ω—ã** –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `instrumentId`
> - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `symbol` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–º–µ—à–∏–≤–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏)
2. [–¢–∏–ø—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤](#—Ç–∏–ø—ã-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤)
3. [–°—É—Ñ—Ñ–∏–∫—Å—ã –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã](#—Å—É—Ñ—Ñ–∏–∫—Å—ã-–∏-–ø—Ä–µ—Ñ–∏–∫—Å—ã)
4. [–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ç–∏–ø](#–≥–¥–µ-–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è-–∫–∞–∂–¥—ã–π-—Ç–∏–ø)
5. [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
6. [–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∞–≤–∏–ª–∞-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
7. [–í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞](#–≤–∞–∂–Ω—ã–µ-–ø—Ä–∞–≤–∏–ª–∞)

---

## üß† –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

–í —Å–∏—Å—Ç–µ–º–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç **—Ç—Ä–∏ —É—Ä–æ–≤–Ω—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

1. **`instrumentId`** ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∫–ª—é—á –≤ —Å–∏—Å—Ç–µ–º–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è)
2. **`symbol`** ‚Äî —Å–∏–º–≤–æ–ª –¥–ª—è UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–µ –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏)
3. **`pair`** ‚Äî –ø–∞—Ä–∞ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API (—Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞)

### –ö–ª—é—á–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ

> **`instrumentId`** ‚Äî —ç—Ç–æ **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ.
> –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (`symbol`, `pair`) —è–≤–ª—è—é—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–º–∏ –æ—Ç `instrumentId`.

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û (–í–µ—Ä—Å–∏—è 3.0)

> **`instrumentId` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.**
> 
> **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
> - OTC (`EURUSD`) –∏ REAL (`EURUSD_REAL`) –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–¥–µ–ª–µ–Ω—ã**
> - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `symbol` (`EUR/USD`) –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–º–µ—à–∏–≤–∞–Ω–∏—é —Å–≤–µ—á–µ–π –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
> - `CandleEngine`, `CandleStore`, `TimeframeAggregator` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `instrumentId`
> - `symbol` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–¢–û–õ–¨–ö–û** –¥–ª—è UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## üéØ –¢–∏–ø—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤

### 1. `instrumentId` (–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID)

**–§–æ—Ä–º–∞—Ç:**
- **OTC:** `EURUSD`, `GBPUSD`, `BTCUSD` (–±–µ–∑ —Å—É—Ñ—Ñ–∏–∫—Å–∞)
- **REAL:** `EURUSD_REAL`, `GBPUSD_REAL`, `USDJPY_REAL` (—Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `_REAL`)

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- ‚úÖ –ö–ª—é—á –≤ `INSTRUMENTS` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`backend/src/config/instruments.ts`)
- ‚úÖ API endpoints: `?instrument=EURUSD_REAL` –∏–ª–∏ `?symbol=EURUSD_REAL`
- ‚úÖ WebSocket –ø–æ–¥–ø–∏—Å–∫–∏: `subscribe({ instrument: 'EURUSD_REAL' })`
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –ø–æ–ª–µ `symbol` –≤ —Ç–∞–±–ª–∏—Ü–µ `price_points` –∏ `candles` (–ª–æ–≥–∏—á–µ—Å–∫–∏ —ç—Ç–æ `instrumentId`)
- ‚úÖ **–ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å–≤–µ—á–µ–π:** `CandleEngine`, `CandleStore`, `TimeframeAggregator` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `instrumentId`
- ‚úÖ **Redis –∫–ª—é—á–∏:** `candle:active:${instrumentId}`, `price:${instrumentId}`
- ‚úÖ Frontend: `instrument` state, localStorage –∫–ª—é—á–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// Backend config
EURUSD: { id: 'EURUSD', source: 'otc', ... }
EURUSD_REAL: { id: 'EURUSD_REAL', source: 'real', ... }

// API request
GET /api/terminal/snapshot?instrument=EURUSD_REAL
GET /api/line/snapshot?symbol=EURUSD_REAL

// WebSocket
ws.send({ type: 'subscribe', instrument: 'EURUSD_REAL' })
```

---

### 2. `symbol` (–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–º–≤–æ–ª)

**–§–æ—Ä–º–∞—Ç:**
- **–í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (OTC –∏ REAL):** `EUR/USD`, `GBP/JPY`, `BTC/USD` (–≤—Å–µ–≥–¥–∞ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º `/`, –≤—Å–µ–≥–¥–∞ uppercase)

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- ‚úÖ `CandleEngine` ‚Äî –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–≤–µ—á–µ–π
- ‚úÖ `TimeframeAggregator` ‚Äî –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
- ‚úÖ `PriceStore` (Redis) ‚Äî –∫–ª—é—á–∏ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö —Ü–µ–Ω
- ‚úÖ WebSocket broadcast: `price:update`, `candle:update` —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

**–ö–∞–∫ –ø–æ–ª—É—á–∞–µ—Ç—Å—è:**
```typescript
// OTC –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
const symbol = config.engine.asset; // "EUR/USD"

// REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
const symbol = config.real.symbol; // "EUR/USD" - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** `symbol` —Ç–µ–ø–µ—Ä—å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π** –¥–ª—è OTC –∏ REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–π –ø–∞—Ä—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –ò–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π –≤ Redis
- –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É OTC –∏ REAL —Ä–µ–∂–∏–º–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±—É–¥—É—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (REAL candles, indicators, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤)

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// Backend: PriceEngineManager.ts
// –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π symbol –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
if (config.source === 'otc') {
  symbol = config.engine.asset; // "EUR/USD"
} else if (config.source === 'real') {
  symbol = config.real.symbol; // "EUR/USD" - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
}

// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ CandleEngine (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π symbol –¥–ª—è OTC –∏ REAL)
const candleEngine = new CandleEngine(symbol, candleStore, eventBus);
```

---

### 3. `pair` (–ü–∞—Ä–∞ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API)

**–§–æ—Ä–º–∞—Ç:**
- –í—Å–µ–≥–¥–∞: `EURUSD`, `GBPUSD`, `USDJPY` (–±–µ–∑ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è, uppercase)

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- ‚úÖ –¢–æ–ª—å–∫–æ –¥–ª—è REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ WebSocket –ø–æ–¥–ø–∏—Å–∫–∞ –∫ `xchangeapi.com`: `{ pairs: ["EURUSD"] }`
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

**–ö–∞–∫ –ø–æ–ª—É—á–∞–µ—Ç—Å—è:**
```typescript
// –¢–æ–ª—å–∫–æ –¥–ª—è REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
const pair = config.real.pair; // "EURUSD"
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// Backend: RealPriceEngine.ts
const subscribeMessage = JSON.stringify({ 
  pairs: [this.config.pair] // ["EURUSD"]
});

// WebSocket –æ—Ç–ø—Ä–∞–≤–∫–∞
ws.send(subscribeMessage);
```

---

## üè∑Ô∏è –°—É—Ñ—Ñ–∏–∫—Å—ã –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã

### –°—É—Ñ—Ñ–∏–∫—Å `_REAL`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–∑–ª–∏—á–∞–µ—Ç REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç OTC.

**–ü—Ä–∞–≤–∏–ª–∞:**
- ‚úÖ **–í—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –±–∞–∑–æ–≤–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é –ø–∞—Ä—ã: `EURUSD` ‚Üí `EURUSD_REAL`
- ‚úÖ **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è OTC –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å `instrumentId`

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
EURUSD_REAL: { id: 'EURUSD_REAL', source: 'real', ... }
GBPJPY_REAL: { id: 'GBPJPY_REAL', source: 'real', ... }

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
EURUSD: { id: 'EURUSD', source: 'real', ... } // –ù–µ—Ç —Å—É—Ñ—Ñ–∏–∫—Å–∞
EURUSD_REAL: { id: 'EURUSD', source: 'real', ... } // ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∫–ª—é—á–æ–º
```

---

### –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—É—Ñ—Ñ–∏–∫—Å–∞ (OTC)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑ —Å—É—Ñ—Ñ–∏–∫—Å–∞ ‚Äî OTC.

**–ü—Ä–∞–≤–∏–ª–∞:**
- ‚úÖ OTC –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã **–Ω–µ –∏–º–µ—é—Ç** —Å—É—Ñ—Ñ–∏–∫—Å–∞ `_REAL`
- ‚úÖ `source: 'otc'` —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ú–æ–≥—É—Ç –∏–º–µ—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å –≤ `label` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: `"EUR/USD OTC"`

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
EURUSD: { 
  id: 'EURUSD', 
  source: 'otc', 
  engine: { asset: 'EUR/USD', ... }
}

// Frontend label
{ id: 'EURUSD', label: 'EUR/USD OTC', digits: 5 }
```

---

## üìç –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ç–∏–ø

### Backend

#### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`backend/src/config/instruments.ts`)

```typescript
// –ö–ª—é—á –æ–±—ä–µ–∫—Ç–∞ = instrumentId
export const INSTRUMENTS: Record<string, InstrumentConfig> = {
  // OTC (–±–µ–∑ —Å—É—Ñ—Ñ–∏–∫—Å–∞)
  EURUSD: {
    id: 'EURUSD',              // ‚Üê instrumentId
    source: 'otc',
    engine: {
      asset: 'EUR/USD',         // ‚Üê symbol (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏)
    },
  },
  
  // REAL (—Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º _REAL)
  EURUSD_REAL: {
    id: 'EURUSD_REAL',          // ‚Üê instrumentId
    source: 'real',
    real: {
      pair: 'EURUSD',           // ‚Üê pair (–¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ API)
    },
  },
};
```

#### 2. PriceEngineManager (`backend/src/prices/PriceEngineManager.ts`)

```typescript
for (const [instrumentId, config] of Object.entries(INSTRUMENTS)) {
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º symbol –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞
  let symbol: string;
  if (config.source === 'otc') {
    symbol = config.engine.asset;        // "EUR/USD"
  } else if (config.source === 'real') {
    symbol = config.real.pair;          // "EURUSD"
  }
  
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º instrumentId –¥–ª—è –∑–∞–ø–∏—Å–∏ price_points
  eventBus.on('price_tick', (event) => {
    this.pricePointWriter.handleTick(
      instrumentId,  // ‚Üê "EURUSD_REAL" (–Ω–µ symbol!)
      tick.price,
      tick.timestamp
    );
  });
}
```

#### 3. API Endpoints

**Terminal Snapshot:**
```typescript
// backend/src/modules/terminal/terminal.controller.ts
GET /api/terminal/snapshot?instrument=EURUSD_REAL
//                                 ‚Üë instrumentId
```

**Line Chart Snapshot:**
```typescript
// backend/src/modules/linechart/linechart.controller.ts
GET /api/line/snapshot?symbol=EURUSD_REAL
//                              ‚Üë instrumentId (–ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è symbol, –Ω–æ —ç—Ç–æ instrumentId!)
```

**Line Chart History:**
```typescript
GET /api/line/history?symbol=EURUSD_REAL&to=1234567890
//                         ‚Üë instrumentId
```

#### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞ `price_points`:**
```sql
-- –ü–æ–ª–µ symbol –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ö—Ä–∞–Ω–∏—Ç instrumentId
CREATE TABLE price_points (
  symbol VARCHAR(255),    -- ‚Üê –ó–¥–µ—Å—å —Ö—Ä–∞–Ω–∏—Ç—Å—è "EURUSD_REAL" (instrumentId)
  timestamp BIGINT,
  price DECIMAL,
  PRIMARY KEY (symbol, timestamp)
);
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```typescript
// Prisma query
await prisma.pricePoint.findMany({
  where: { 
    symbol: instrumentId  // "EURUSD_REAL" (–Ω–µ "EURUSD"!)
  }
});
```

#### 5. WebSocket

**–ü–æ–¥–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞:**
```typescript
// Frontend ‚Üí Backend
ws.send({
  type: 'subscribe',
  instrument: 'EURUSD_REAL'  // ‚Üê instrumentId
});
```

**Broadcast —Å–æ–±—ã—Ç–∏–π:**
```typescript
// Backend ‚Üí Frontend
ws.send({
  type: 'price:update',
  instrument: 'EURUSD_REAL',  // ‚Üê instrumentId
  data: { price: 1.19016, timestamp: 1234567890 }
});
```

**–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π symbol (–¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏):**
```typescript
// Backend: WebSocketManager.ts
// symbol –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫
const symbol = config.source === 'otc' 
  ? config.engine.asset      // "EUR/USD"
  : config.real.pair;       // "EURUSD"
```

---

### Frontend

#### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`frontend/lib/instruments.ts`)

```typescript
export const INSTRUMENTS: InstrumentInfo[] = [
  // REAL (—Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º _REAL)
  { 
    id: 'EURUSD_REAL',           // ‚Üê instrumentId
    label: 'EUR/USD Real',        // ‚Üê –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
    digits: 5 
  },
  
  // OTC (–±–µ–∑ —Å—É—Ñ—Ñ–∏–∫—Å–∞)
  { 
    id: 'EURUSD',                 // ‚Üê instrumentId
    label: 'EUR/USD OTC',        // ‚Üê –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
    digits: 5 
  },
];
```

#### 2. State –∏ localStorage

```typescript
// Terminal page
const [instrument, setInstrument] = useState<string>('EURUSD_REAL');

// localStorage
localStorage.setItem('terminal.layout.v1', JSON.stringify({
  instrument: 'EURUSD_REAL'  // ‚Üê instrumentId
}));
```

#### 3. API –∑–∞–ø—Ä–æ—Å—ã

```typescript
// Snapshot –∑–∞–ø—Ä–æ—Å
fetch(`/api/terminal/snapshot?instrument=${instrument}`)
//                                              ‚Üë instrumentId

// Line chart snapshot
fetch(`/api/line/snapshot?symbol=${instrument}`)
//                                    ‚Üë instrumentId (–ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è symbol!)
```

#### 4. WebSocket –ø–æ–¥–ø–∏—Å–∫–∏

```typescript
ws.send({
  type: 'subscribe',
  instrument: instrument  // ‚Üê instrumentId ('EURUSD_REAL')
});
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: OTC –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (EURUSD)

```typescript
// Backend config
EURUSD: {
  id: 'EURUSD',                    // instrumentId
  base: 'EUR',
  quote: 'USD',
  source: 'otc',
  engine: {
    asset: 'EUR/USD',              // symbol (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏)
  },
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
// - API: ?instrument=EURUSD
// - WebSocket: subscribe({ instrument: 'EURUSD' })
// - DB: price_points.symbol = 'EURUSD'
// - Redis: price:EUR/USD (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è symbol –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏)
```

### –ü—Ä–∏–º–µ—Ä 2: REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (EURUSD_REAL)

```typescript
// Backend config
EURUSD_REAL: {
  id: 'EURUSD_REAL',              // instrumentId
  base: 'EUR',
  quote: 'USD',
  source: 'real',
  real: {
    provider: 'xchange',
    symbol: 'EUR/USD',              // symbol (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏)
    pair: 'EURUSD',                  // pair (–¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ API)
  },
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
// - API: ?instrument=EURUSD_REAL
// - WebSocket: subscribe({ instrument: 'EURUSD_REAL' })
// - DB: price_points.symbol = 'EURUSD_REAL' (–ª–æ–≥–∏—á–µ—Å–∫–∏ —ç—Ç–æ instrumentId)
// - External API: { pairs: ["EURUSD"] } (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è pair)
// - Redis: price:EUR/USD (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π symbol –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏)
// - CandleEngine: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç symbol 'EUR/USD' (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è OTC –∏ REAL)
```

### –ü—Ä–∏–º–µ—Ä 3: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π symbol –¥–ª—è OTC –∏ REAL

```typescript
// –£ –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
// 1. EURUSD (OTC) - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ —Ü–µ–Ω—ã
// 2. EURUSD_REAL (REAL) - —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ—Ç–∏—Ä–æ–≤–∫–∏

// –û–Ω–∏ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ instrumentId:
instrumentId_OTC = 'EURUSD'
instrumentId_REAL = 'EURUSD_REAL'

// –ù–æ –∏–º–µ—é—Ç –û–î–ò–ù–ê–ö–û–í–´–ô symbol –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:
symbol_OTC = 'EUR/USD'
symbol_REAL = 'EUR/USD'  // ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

// –í –ë–î –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (–ø–æ instrumentId):
price_points: { symbol: 'EURUSD', ... }        // OTC –¥–∞–Ω–Ω—ã–µ (symbol = instrumentId)
price_points: { symbol: 'EURUSD_REAL', ... }   // REAL –¥–∞–Ω–Ω—ã–µ (symbol = instrumentId)

// –ù–æ –≤ Redis –∏ CandleEngine –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π symbol:
Redis: price:EUR/USD (–¥–ª—è –æ–±–æ–∏—Ö)
CandleEngine: –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ø–æ 'EUR/USD' (–¥–ª—è –æ–±–æ–∏—Ö)
```

---

## üîÑ –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

### ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û

1. **–£–¥–∞–ª—è—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å `_REAL` –∏–∑ `instrumentId`:**
   ```typescript
   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
   const baseId = instrumentId.replace('_REAL', ''); // –ü–ª–æ—Ö–æ!
   const symbol = baseId; // –ü–æ—Ç–µ—Ä—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏!
   ```

2. **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å `instrumentId` –≤ `symbol` –±–µ–∑ —É—á–µ—Ç–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞:**
   ```typescript
   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
   const symbol = instrumentId; // –ú–æ–∂–µ—Ç –±—ã—Ç—å "EURUSD_REAL"!
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pair` –≤–º–µ—Å—Ç–æ `instrumentId` –≤ API:**
   ```typescript
   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
   GET /api/line/snapshot?symbol=EURUSD  // –î–ª—è REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞!
   // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ?symbol=EURUSD_REAL
   ```

4. **–°–º–µ—à–∏–≤–∞—Ç—å OTC –∏ REAL –¥–∞–Ω–Ω—ã–µ:**
   ```typescript
   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
   // –ó–∞–ø—Ä–æ—Å snapshot –¥–ª—è EURUSD_REAL, –Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ EURUSD (OTC)
   ```

### ‚úÖ –†–ê–ó–†–ï–®–ï–ù–û

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `instrumentId` –Ω–∞–ø—Ä—è–º—É—é –≤–µ–∑–¥–µ:**
   ```typescript
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
   const instrumentId = 'EURUSD_REAL';
   await prisma.pricePoint.findMany({
     where: { symbol: instrumentId }  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –µ—Å—Ç—å
   });
   ```

2. **–ü–æ–ª—É—á–∞—Ç—å `symbol` –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   ```typescript
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
   const config = getInstrument(instrumentId);
   const symbol = config.source === 'otc' 
     ? config.engine.asset      // "EUR/USD"
     : config.real.symbol;      // "EUR/USD" - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pair` —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API:**
   ```typescript
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
   if (config.source === 'real') {
     const pair = config.real.pair; // "EURUSD"
     ws.send(JSON.stringify({ pairs: [pair] }));
   }
   ```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### 1. `instrumentId` ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

> **–í—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `instrumentId` –¥–ª—è:
> - API –∑–∞–ø—Ä–æ—Å–æ–≤
> - WebSocket –ø–æ–¥–ø–∏—Å–æ–∫
> - –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î (–ø–æ–ª–µ `symbol` –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ö—Ä–∞–Ω–∏—Ç `instrumentId`)
> - Frontend state
> - localStorage

### 2. –°—É—Ñ—Ñ–∏–∫—Å `_REAL` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

> **–í—Å–µ–≥–¥–∞** –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Å—É—Ñ—Ñ–∏–∫—Å `_REAL` –∫ `instrumentId` –¥–ª—è REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
> –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–µ —Ä–∞–∑–ª–∏—á–∞—Ç—å OTC –∏ REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫.

### 3. –ù–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ `instrumentId` –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

> **–ù–µ —É–¥–∞–ª—è–π—Ç–µ** —Å—É—Ñ—Ñ–∏–∫—Å `_REAL` –∏–∑ `instrumentId`.
> –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –±–∞–∑–æ–≤—ã–π —Å–∏–º–≤–æ–ª, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `config.real.pair` –∏–ª–∏ `config.engine.asset`.

### 4. `symbol` ‚Äî —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–º–≤–æ–ª (—Ç–æ–ª—å–∫–æ –¥–ª—è UI)

> `symbol` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–¢–û–õ–¨–ö–û** –¥–ª—è:
> - UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞)
> - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω
> - –û—Å–∏ Y –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
> - –õ–µ–π–±–ª–æ–≤ –∏ –ø–æ–¥–ø–∏—Å–µ–π
>
> **‚ö†Ô∏è –í–ê–ñ–ù–û:** `symbol` **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –¥–ª—è:
> - ‚ùå –ê–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å–≤–µ—á–µ–π (`CandleEngine` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `instrumentId`)
> - ‚ùå –•—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `instrumentId`)
> - ‚ùå Redis –∫–ª—é—á–µ–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `instrumentId`)
> - ‚ùå WebSocket –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `instrumentId`)
>
> **–ü—Ä–∏—á–∏–Ω–∞:** OTC –∏ REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–¥–µ–ª–µ–Ω—ã** –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏.
> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `symbol` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–º–µ—à–∏–≤–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

### 5. `pair` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API

> `pair` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –¥–ª—è:
> - WebSocket –ø–æ–¥–ø–∏—Å–∫–∏ –∫ `xchangeapi.com`
> - –ü–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
>
> **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** `pair` –≤–Ω—É—Ç—Ä–∏ —Å–∏—Å—Ç–µ–º—ã.

---

## üéØ –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –ß—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å | –ü—Ä–∏–º–µ—Ä |
|----------|-----------------|--------|
| API endpoint (`?instrument=`) | `instrumentId` | `EURUSD_REAL` |
| API endpoint (`?symbol=`) | `instrumentId` | `EURUSD_REAL` |
| WebSocket subscribe | `instrumentId` | `EURUSD_REAL` |
| –ë–î –∑–∞–ø—Ä–æ—Å (`price_points.symbol`) | `instrumentId` | `EURUSD_REAL` |
| Frontend state | `instrumentId` | `EURUSD_REAL` |
| localStorage | `instrumentId` | `EURUSD_REAL` |
| CandleEngine –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ | `instrumentId` | `EURUSD` –∏–ª–∏ `EURUSD_REAL` |
| Redis –∫–ª—é—á–∏ (candles) | `instrumentId` | `candle:active:EURUSD` –∏–ª–∏ `candle:active:EURUSD_REAL` |
| Redis –∫–ª—é—á–∏ (price) | `instrumentId` | `price:EURUSD` –∏–ª–∏ `price:EURUSD_REAL` |
| WebSocket routing | `instrumentId` | `EURUSD` –∏–ª–∏ `EURUSD_REAL` |
| UI display | `symbol` | `EUR/USD` (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) |
| External API (xchange) | `pair` | `EURUSD` |

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `backend/src/config/instruments.ts` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `frontend/lib/instruments.ts` ‚Äî frontend registry –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `backend/src/prices/PriceEngineManager.ts` ‚Äî –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `symbol`
- `backend/src/modules/linechart/linechart.controller.ts` ‚Äî API endpoints
- `backend/src/modules/terminal/terminal.controller.ts` ‚Äî terminal API
- `backend/src/prices/engines/RealPriceEngine.ts` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pair` –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ API

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-30  
**–í–µ—Ä—Å–∏—è:** 3.0

---

## üîÑ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 3.0 (2026-01-30) ‚Äî –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï
- ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ `instrumentId`** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–º–µ—à–∏–≤–∞–Ω–∏—è OTC –∏ REAL —Å–≤–µ—á–µ–π
- ‚úÖ `CandleEngine` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `instrumentId` –≤–º–µ—Å—Ç–æ `symbol` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
- ‚úÖ `CandleStore` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `instrumentId` –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (Redis, –ë–î)
- ‚úÖ `TimeframeAggregator` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `instrumentId` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
- ‚úÖ `symbol` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–¢–û–õ–¨–ö–û** –¥–ª—è UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ OTC –∏ REAL –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã—Ö

### –í–µ—Ä—Å–∏—è 2.0 (2026-01-30)
- ‚úÖ **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω `symbol`** –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (OTC –∏ REAL)
- ‚úÖ –¢–µ–ø–µ—Ä—å `symbol` –≤—Å–µ–≥–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `EUR/USD` (—Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º `/`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `real.symbol` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é REAL –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ `real.pair` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ API (xchangeapi.com)
- ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞:** `symbol` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Å–º–µ—à–∏–≤–∞–Ω–∏—é OTC –∏ REAL —Å–≤–µ—á–µ–π

### –í–µ—Ä—Å–∏—è 1.0 (2026-01-30)
- –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
